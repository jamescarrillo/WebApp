<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="proveedor" language="groovy" pageWidth="595" pageHeight="842" columnWidth="545" leftMargin="30" rightMargin="20" topMargin="20" bottomMargin="20" uuid="2b97849d-62ab-4724-935c-c7ffe79547c9">
	<property name="ireport.zoom" value="1.098075000000002"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<style name="table">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_CH" mode="Opaque" backcolor="#CCCCCC">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 1_TH" mode="Opaque" backcolor="#CCE3F9">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<subDataset name="DSDetalle" uuid="23e30323-f0a2-4196-b671-2fdbdca8eb82">
		<parameter name="p_anho" class="java.lang.String">
			<defaultValueExpression><![CDATA[]]></defaultValueExpression>
		</parameter>
		<parameter name="p_trimestre" class="java.lang.String">
			<defaultValueExpression><![CDATA[]]></defaultValueExpression>
		</parameter>
		<queryString>
			<![CDATA[select *
 from web.f00006 where anho = $P{p_anho} and trimestre = $P{p_trimestre} ORDER BY proveedor asc]]>
		</queryString>
		<field name="id" class="java.lang.Integer"/>
		<field name="anho" class="java.lang.String"/>
		<field name="trimestre" class="java.lang.String"/>
		<field name="ruc" class="java.lang.String"/>
		<field name="proveedor" class="java.lang.String"/>
		<field name="importe" class="java.math.BigDecimal"/>
		<field name="estado" class="java.lang.Boolean"/>
		<variable name="indice" class="java.lang.Integer" calculation="Count">
			<variableExpression><![CDATA[$F{id}]]></variableExpression>
		</variable>
		<variable name="sumto" class="java.lang.Double" calculation="Sum">
			<variableExpression><![CDATA[$F{importe}]]></variableExpression>
		</variable>
	</subDataset>
	<parameter name="p_anho_p" class="java.lang.String"/>
	<parameter name="p_logo" class="java.lang.String"/>
	<parameter name="p_trimestre_p" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[select anho,trimestre, concat (case when trimestre = '1' then 'Primer Trimestre'  else
	  case when trimestre = '2' then 'Segundo Trimestre'  else
	  case when trimestre = '3' then 'Tercer Trimestre'  else
	  case when trimestre = '4' then 'Cuarto Trimestre'
end end end end, ' - ', anho) formato from web.f00006
where anho = $P{p_anho_p} and trimestre = cast($P{p_trimestre_p} as character)
group by anho, trimestre
order by anho desc, trimestre desc]]>
	</queryString>
	<field name="anho" class="java.lang.String"/>
	<field name="trimestre" class="java.lang.String"/>
	<field name="formato" class="java.lang.String"/>
	<pageHeader>
		<band height="50" splitType="Stretch">
			<image scaleImage="FillFrame" hAlign="Center" vAlign="Top">
				<reportElement uuid="47a8b7ec-0f20-4439-a36d-5582047cb1ad" x="0" y="0" width="545" height="50"/>
				<imageExpression><![CDATA[$P{p_logo}]]></imageExpression>
			</image>
			<textField pattern="dd/MM/yyyy">
				<reportElement uuid="50b57a57-83a0-40ae-bd9c-fb0ed60bbc97" x="445" y="-20" width="100" height="20"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<columnHeader>
		<band height="40">
			<textField>
				<reportElement uuid="4132a350-e3c3-4467-a825-a2f6e33ba717" x="0" y="20" width="545" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="12" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{formato}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement uuid="7ff7092e-88ae-4663-a5c6-008d81111bd1" x="0" y="0" width="545" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[REPORTE DE PRINCIPALES PROVEEDORES]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="631" splitType="Stretch">
			<componentElement>
				<reportElement uuid="1f4b62d7-139a-4798-8826-66d514f376f7" key="table" style="table" x="0" y="0" width="545" height="631" isPrintInFirstWholeBand="true"/>
				<jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd" whenNoDataType="AllSectionsNoDetail">
					<datasetRun subDataset="DSDetalle" uuid="2e60f977-693e-4e68-9abc-4a5e23a4a278">
						<datasetParameter name="p_anho">
							<datasetParameterExpression><![CDATA[$F{anho}]]></datasetParameterExpression>
						</datasetParameter>
						<datasetParameter name="p_trimestre">
							<datasetParameterExpression><![CDATA[$F{trimestre}]]></datasetParameterExpression>
						</datasetParameter>
						<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					</datasetRun>
					<jr:column uuid="d375975e-48d7-434d-95da-8e3b822006cf" width="28">
						<jr:columnHeader style="table_CH" height="30" rowSpan="1">
							<staticText>
								<reportElement uuid="cd0a3224-5b10-4eb7-900e-da38bf8db85c" x="0" y="0" width="28" height="30"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font isBold="true"/>
								</textElement>
								<text><![CDATA[N°]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="table_TD" height="18" rowSpan="1">
							<textField>
								<reportElement uuid="7335b270-8f64-4419-88a8-7cad3e679905" x="0" y="0" width="28" height="18"/>
								<textElement textAlignment="Center" verticalAlignment="Bottom">
									<font size="9" isBold="true"/>
								</textElement>
								<textFieldExpression><![CDATA[$V{indice}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column uuid="cfd7c103-4f15-4eab-8b77-0990a0546adc" width="309">
						<jr:columnHeader style="table_CH" height="30" rowSpan="1">
							<staticText>
								<reportElement uuid="cd0a3224-5b10-4eb7-900e-da38bf8db85c" x="0" y="0" width="309" height="30"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font isBold="true"/>
								</textElement>
								<text><![CDATA[Proveedor]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="table_TD" height="18" rowSpan="1">
							<textField isStretchWithOverflow="true" isBlankWhenNull="true">
								<reportElement uuid="b0ff7f3e-bebe-448f-bb95-fdc59d8ce01d" x="3" y="0" width="304" height="18"/>
								<textElement verticalAlignment="Middle">
									<font size="9"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{proveedor}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column uuid="c1d18c1d-b92c-4b27-b86d-d00a59a31d86" width="112">
						<jr:tableFooter style="table 1_TH" height="25" rowSpan="1">
							<staticText>
								<reportElement uuid="4be419ac-f55a-492b-800a-42082ace2b8c" x="0" y="0" width="112" height="25"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font size="9" isBold="true"/>
								</textElement>
								<text><![CDATA[Total (S/.)]]></text>
							</staticText>
						</jr:tableFooter>
						<jr:columnHeader style="table_CH" height="30" rowSpan="1">
							<staticText>
								<reportElement uuid="4be419ac-f55a-492b-800a-42082ace2b8c" x="0" y="1" width="112" height="29"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font size="10" isBold="true"/>
								</textElement>
								<text><![CDATA[RUC]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="table_TD" height="18" rowSpan="1">
							<textField isStretchWithOverflow="true" isBlankWhenNull="true">
								<reportElement uuid="5c185afd-ba57-4986-8ab7-ecfb61603d25" x="0" y="0" width="112" height="18"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font size="9"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{ruc}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column uuid="1cbe52a1-ae98-4bd7-ab3e-e63764e7d2cc" width="95">
						<jr:tableFooter style="table 1_TH" height="25" rowSpan="1">
							<textField pattern="#,##0.00" isBlankWhenNull="true">
								<reportElement uuid="ec435f7f-c650-449e-9650-1c2f5ebe8afd" x="1" y="0" width="90" height="25"/>
								<textElement textAlignment="Right" verticalAlignment="Middle">
									<font size="9" isBold="true" isStrikeThrough="false"/>
								</textElement>
								<textFieldExpression><![CDATA[$V{sumto}]]></textFieldExpression>
							</textField>
						</jr:tableFooter>
						<jr:columnHeader style="table_CH" height="30" rowSpan="1">
							<staticText>
								<reportElement uuid="f837f43e-ed9a-418a-868e-0643b1858708" x="2" y="1" width="93" height="29"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font size="10" isBold="true"/>
								</textElement>
								<text><![CDATA[Importe (S/.)]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="table_TD" height="18" rowSpan="1">
							<textField isStretchWithOverflow="true" pattern="#,##0.00" isBlankWhenNull="true">
								<reportElement uuid="e14ed41f-d486-460e-92c3-bf9fc685651b" x="0" y="0" width="90" height="18"/>
								<textElement textAlignment="Right" verticalAlignment="Middle">
									<font size="9"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{importe}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
				</jr:table>
			</componentElement>
		</band>
	</detail>
	<columnFooter>
		<band height="20" splitType="Stretch">
			<textField>
				<reportElement uuid="c728dd61-6ee7-4b05-8e68-5b0b0a9c098f" x="425" y="0" width="80" height="20"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA["Página "+$V{PAGE_NUMBER}+" de"]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report">
				<reportElement uuid="8a3377e0-bf4d-438b-bd71-68b08d7a4bf0" x="505" y="0" width="40" height="20"/>
				<textElement verticalAlignment="Middle">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement uuid="fd4d7688-feae-4be0-8ff0-e6fe8056d925" x="15" y="0" width="240" height="20"/>
				<textElement verticalAlignment="Middle">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[www.peam.gob.pe]]></text>
			</staticText>
		</band>
	</columnFooter>
</jasperReport>
